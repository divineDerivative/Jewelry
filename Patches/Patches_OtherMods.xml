<?xml version="1.0" encoding="utf-8" ?>
<Patch>

    <!-- Gemstones compatibility -->
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>Gemstones</li>
        </mods>
        <match Class="PatchOperationRemove">
            <xpath>/Defs/ThingDef[defName="Z_Diamond" or defName="Z_Ruby" or defName="Z_Sapphire"]</xpath>
        </match>
    </Operation>

    <!-- Glowstone compatibility -->
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>Glowstone</li>
        </mods>
        <match Class="PatchOperationAdd">
            <xpath>/Defs/ThingDef[defName="GLO_LargeGlowstone" or defName="GLO_SmallGlowstone"]</xpath>
            <value>
                <stuffProps>
                    <stuffAdjective>glowstone</stuffAdjective>
                    <categories>
                        <li>Gemstones</li>
                        <li>Stony</li>
                    </categories>
                    <commonality>0.01</commonality>
                    <color>(113,187,252)</color>
                    <constructEffect>ConstructMetal</constructEffect>
					<soundImpactStuff IgnoreIfNoMatchingField="True">BulletImpact_Metal</soundImpactStuff>
					<soundImpactBullet IgnoreIfNoMatchingField="True">BulletImpact_Metal</soundImpactBullet>
                    <soundMeleeHitSharp>MeleeHit_Stone</soundMeleeHitSharp>
                    <soundMeleeHitBlunt>MeleeHit_Stone</soundMeleeHitBlunt>
                    <statOffsets>
                        <Beauty>10</Beauty>
                    </statOffsets>
                    <statFactors>
                        <MaxHitPoints>0.5</MaxHitPoints>
                        <WorkToMake>1.4</WorkToMake>
                        <WorkToBuild>5.0</WorkToBuild>
                        <Beauty>2.5</Beauty>
                        <Flammability>0</Flammability>
                        <MeleeWeapon_CooldownMultiplier>1.3</MeleeWeapon_CooldownMultiplier>
                    </statFactors>
                </stuffProps>
            </value>
        </match>
    </Operation>
</Patch>
